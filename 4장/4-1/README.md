# MySQL 엔진 아키텍처

## 4.1.1 MySQL의 전체 구조

- MySQL 서버는 크게 MySQL 엔진과 스토리지 엔진으로 구분할 수 있습니다.

### 4.1.1.1 MySQL 엔진

- 클라이언트의 접속 및 쿼리 요청을 처리하는 **커넥션 핸들러**, **SQL 파서 및 전처리기, 옵티마이저**로 구성

### 4.1.1.2 스토리지 엔진

- 실제 데이터를 디스크 스토리지에 저장하거나, 데이터를 읽어오는 부분을 담당

- MySQL 서버에서 MySQL 엔진은 하나지만, 스토리지 엔진은 여러개를 동시 사용

### 4.1.1.3 핸들러 API

- MySQL 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때 각 스토리지 엔진에 쓰기 or 읽이 요청을 하는데, 이 요청을 핸들러 요청이라고 함.

### 4.1.3.2 로컬 메모리 영역

- 클라이언트의 요청 하나 당 하나의 스레드를 할당함.

- 각 클라이언트 스레드별로 독립적으로 할당되어 절대 공유되지 않음.

- 적절한 메모리 공간을 설정해줘야함.

## 4.1.6 쿼리 실행 구조

### 4.1.6.1 쿼리 파서

- 요청으로 들어온 SQL을 토큰화

### 4.1.6.2 전처리기

- 각 토큰들의 존재 여부 혹은 접근 권한을 확인

### 4.1.6.4 실행 엔진

- 옵티마이저에 의해 생성된 계획대로 각 핸들러에게 요청해서 받은 결과를 또 다른 핸덜러 요청의 입력으로 연결하는 등의 역할 수행

