# 5.2 MySQL 엔진의 잠금

- MySQL에서 사용되는 잠금은 크게 스토리지 엔진 레벨, MySQL 엔진 레벨로 나눌 수 있다.

- MySQL 엔진은 MySQL 서버에서 스토리지 엔진을 제외한 나머지 부분이라 모든 스토리지 엔진에 영향을 미친다.

- 스토리지 엔진 레벨의 잠금은 스토리지 엔진 간 상호 영향을 미치지 않는다.

- MySQL 엔진에서는 테이블 데이터 동기화를 위한 테이블 락 이외에 테이블의 구조를 잠그는 메타데이터 락, 네임드 락 같은 잠금 기능을 제공한다.

## 5.2.1 글로벌 락

- FLUSH TABLES WITH READ LOCK 명령으로 획득할 수 있고, 한 세션에서 글로벌 락을 획득하면 다른 세션에서는 SELECT를 제외한 대부분의 DDL, DML 문장이 락에 의해 대기상태에 빠진다.

## 5.2.2 테이블 락

- 개별 테이블 단위로 설정되는 잠금이며, InnoDB 테이블의 경우 명시적 명령을 통해 락을 획득할 수 있다.

## 5.2.3 네임드 락

- GET_LOCK() 함수를 이용해 임의의 문자열에 대한 잠금을 설정할 수 있는데, 데이터베이스 객체가 아닌 단순히 사용자가 지정한 문자열에 대해 획득하고 반납하는 잠금이다.

## 5.2.4 메타데이터 락

- 데이터베이스 객체의 이름이나 구조를 변경하는 경우에 획득하는 잠금이다.

- RENAME TABLE tab_a TO tab_b 같이 테이블의 이름을 변경하는 경우 잠금을 획득하는데, 원본과 변경될 이름 두 개 모두 한꺼번에 잠금을 설정한다.